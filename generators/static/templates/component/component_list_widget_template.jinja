/*
 * Component list template with full CRUD UI
 * Generates a reusable component with:
 * - BLoC integration for state management
 * - List view showing all items
 * - Add, edit, delete action buttons
 * - Loading and error state handling
 * 
 * This component expects the BLoC to be provided by a parent widget.
 */

import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../application/[[component_name]]_bloc.dart';

class [[component_pascal]]Component extends StatelessWidget {
  const [[component_pascal]]Component({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<[[component_pascal]]Bloc, [[component_pascal]]State>(
      builder: (context, state) {
        return switch (state) {
          Initial() => const Center(child: Text('Welcome')),
          Loading() => const Center(child: CircularProgressIndicator()),
          Loaded(:final items) => ListView.builder(
              itemCount: items.length,
              itemBuilder: (context, index) {
                final item = items[index];
                return ListTile(
                    title: Text(item.toString()),
                    trailing: Row(
                    mainAxisSize: MainAxisSize.min,
                    children: [
                        IconButton(
                        icon: const Icon(Icons.edit),
                        onPressed: () {
                            // Implement: Navigate to edit form
                        },
                        ),
                        IconButton(
                        icon: const Icon(Icons.delete),
                        onPressed: () {
                            context.read<[[component_pascal]]Bloc>().add(
                            [[component_pascal]]Event.deleteRequested(item.id.getOrCrash()),
                            );
                        },
                      ),
                    ],
                  ),
                );
              },
            ),
          Error(:final message) => Center(child: Text('Errore: $message')),
          _ => const Center(child: Text('Stato sconosciuto')),
        };
      },
    );
  }
}
